import{z as C,o as n,w as e,C as l}from"./index-BGeTIgRX.js";import{e as F,f as I,g as z,h as L,b as M,c as q}from"./index-Di7aZ_JG.js";import"./iconBase-BIFuJYse.js";const H={backgroundImage:'url("https://images.pexels.com/photos/2363/france-landmark-lights-night.jpg")',backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundSize:"cover",width:"100%"},K=()=>{const d=C(),[o,h]=n.useState(""),[m,f]=n.useState(""),[i,b]=n.useState(!1),[w,y]=n.useState(""),[x,j]=n.useState(!1),[c,v]=n.useState(!1),r=n.useRef([]),N=(s,t)=>{s.target.value.length>0&&t<r.current.length-1&&r.current[t+1].focus()},S=(s,t)=>{s.key==="Backspace"&&s.target.value===""&&t>0&&r.current[t-1].focus()},P=s=>{s.clipboardData.getData("text").slice(0,6).split("").forEach((a,g)=>{r.current[g]&&(r.current[g].value=a)})},[E,{isLoading:u}]=F(),[R,{isLoading:p}]=I(),k=async s=>{s.preventDefault();try{const t=await E({email:o}).unwrap();l.success(t?.message||"Email sent successfully!"),b(!0)}catch(t){console.error(t?.data?.message||t.error),l.error(t?.data?.message||"Failed to send reset email")}},D=async s=>{s.preventDefault();const t=r.current.map(a=>a.value).join("");t.length===6?(y(t),j(!0)):l.error("Please enter a 6-digit OTP")},O=async s=>{s.preventDefault();try{await R({email:o,otp:w,newPassword:m}).unwrap(),l.success("Password updated successfully"),d("/login")}catch(t){l.error(t?.data?.message||"Password modification failed")}};return e.jsxs("div",{className:"relative w-full min-h-screen flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 z-0 h-dvh",style:H}),e.jsxs("div",{className:"absolute w-full inset-0 h-dvh flex justify-center items-center bg-gradient-to-r from-cyan-400/90 to-blue-500/90 z-10 px-[8px] sm:px-[24px] lg:px-[100px] 2xl:px-[200px]",children:[e.jsx("div",{className:"absolute top-8 left-4 lg:left-24",children:e.jsx("h1",{onClick:()=>d("/"),className:"text-xl xs:text-2xl sm:text-3xl font-extrabold tracking-tight text-red-500 cursor-pointer hover:text-red-600 transition duration-300",children:"MyTodo"})}),e.jsxs("div",{className:"w-full flex justify-center items-center",children:[!i&&e.jsxs("form",{onSubmit:k,className:"bg-slate-950 w-full p-4 lg:p-8 rounded-lg shadow-lg lg:w-[450px] text-sm",children:[e.jsx("h1",{className:"text-white text-2xl font-semibold text-center mb-4",children:"Reset Password"}),e.jsx("p",{className:"text-center mb-6 text-cyan-400",children:"Enter your registered email address"}),e.jsxs("div",{className:"flex items-center gap-3 w-full px-5 py-3 rounded-full bg-gray-700",children:[e.jsx(z,{className:"text-gray-100"}),e.jsx("input",{type:"email",value:o,onChange:s=>h(s.target.value),className:"flex-1 bg-transparent outline-none text-sm text-gray-100 focus:outline-none",placeholder:"Email Address",required:!0})]}),e.jsx("button",{type:"submit",disabled:u,className:"w-full bg-gradient-to-r from-cyan-400 to-blue-600 text-white py-2 rounded-md hover:from-cyan-500 hover:to-blue-700 transition duration-200 cursor-pointer mt-4",children:u?"Submitting...":"Submit"})]}),!x&&i&&e.jsxs("form",{onSubmit:D,className:"bg-slate-950 w-full p-4 lg:p-8 rounded-lg shadow-lg lg:w-[450px] text-sm",children:[e.jsx("h1",{className:"text-white text-2xl font-semibold text-center mb-4",children:"Reset password OTP"}),e.jsx("p",{className:"text-center mb-6 text-cyan-400",children:"Enter the 6-digit code sent to your email address"}),e.jsx("div",{onPaste:P,className:"flex items-center justify-between mb-4 w-full space-x-1",children:Array(6).fill(0).map((s,t)=>e.jsx("input",{ref:a=>r.current[t]=a,onInput:a=>N(a,t),onKeyDown:a=>S(a,t),className:"w-12 h-12 sm:w-14 sm:h-14 bg-gray-800 text-white text-center text-xl font-semibold rounded-md shadow-inner border border-gray-700 focus:outline-none focus:ring-2 focus:ring-cyan-400 transition-all duration-150",type:"text",maxLength:"1",inputMode:"numeric",pattern:"[0-9]*",required:!0},t))}),e.jsx("button",{type:"submit",disabled:!1,className:"w-full bg-gradient-to-r from-cyan-400 to-blue-600 text-white py-2 rounded-md hover:from-cyan-500 hover:to-blue-700 transition duration-200 cursor-pointer mt-4",children:u?"Submitting...":"Submit"})]}),x&&i&&e.jsxs("form",{onSubmit:O,className:"bg-slate-950 w-full p-4 lg:p-8 rounded-lg shadow-lg lg:w-[450px] text-sm",children:[e.jsx("h1",{className:"text-white text-2xl font-semibold text-center mb-4",children:"New password"}),e.jsx("p",{className:"text-center mb-6 text-cyan-400",children:"Enter the new password below"}),e.jsxs("div",{className:"relative flex items-center gap-3 w-full px-5 py-3 rounded-full bg-gray-700",children:[e.jsx(L,{className:"text-gray-100"}),e.jsx("input",{type:c?"text":"password",value:m,onChange:s=>f(s.target.value),className:"flex-1 bg-transparent outline-none text-sm text-gray-100 pr-8",placeholder:"New Password",required:!0}),e.jsx("div",{className:"absolute right-5 cursor-pointer text-gray-300 hover:text-white",onClick:()=>v(!c),children:c?e.jsx(M,{}):e.jsx(q,{})})]}),e.jsx("button",{type:"submit",disabled:p,className:"w-full bg-gradient-to-r from-cyan-400 to-blue-600 text-white py-2 rounded-md hover:from-cyan-500 hover:to-blue-700 transition duration-200 cursor-pointer mt-4",children:p?"Resetting...":"Reset"})]})]})]})]})};export{K as default};
